+++
title = "Hugo Repositories"
bigimg = ""
date = "2014-07-11T10:54:24+02:00"
subtitle = ""
draft = false

+++

Now that I have the basic blog configured, I'd like to describe how it all lives in git.

<!--more-->

The [Hugo Quickstart Guide](https://gohugo.io/overview/quickstart/), while excellent, didn't cover exactly what I wanted.

# Step 11. Generate website
The guide first describes how to make changes to your `config.toml`.

```ini
baseURL = "https://<your GitHub username>.github.io/bookshelf/"
```

This is perfect if you already have something on GitHub pages.
Instead I wanted the root to be my blog and with that in mind I set `baseURL` to a different value.
```ini
baseURL = "https://tscott0.github.io"
```

We still want to generate the site using Hugo, so I ran the following command:
```bash
hugo --theme=beautifulhugo
```

At this point the directory structure should look something like this:
{{< highlight bash "hl_lines=2 9 21" >}}
$ tree -d blog/
blog/                           # The main repo
├── archetypes
├── content
│   ├── page
│   └── post
├── data
├── layouts
├── public                      # The site generated by hugo
│   ├── css
│   ├── img
│   ├── js
│   ├── page
│   │   └── 1
│   └── post
│       ├── configuring-hugo
│       └── hello-hugo
├── static
│   └── img
└── themes
    └── beautifulhugo           # A fork of the beautifulhugo theme
        ├── archetypes
        ├── exampleSite
        │   ├── content
        │   │   ├── page
        │   │   └── post
        │   └── static
        ├── images
        ├── layouts
        │   ├── _default
        │   └── partials
        └── static
            ├── css
            ├── img
            └── js

33 directories
{{< / highlight >}}

# Step 12. Deploy bookshelf on GitHub pages
## The main repo
The first step is important regardless. We still need to create the main repo.
```bash
$ git init
$ echo "/public/" >> .gitignore
$ echo "/themes/" >> .gitignore
$ git add --all
$ git commit -m "Initial commit"
```
Adding both the `/public/` and `/themes/` directories to the `.gitignore` file will also ensure that we don't commit the files generated by Hugo or any themes, only the raw content like images, posts etc.
I became a little confused on reading this section for the first time.
We are now done with "main" repo. The Quickstart Guide leaves it for the reader to decide what to do with the repo.
For now it will remain local only.

## The public repo
This is where we go off piste. 
Instead of creating a new repository named `bookshelf` ours will be `<your GitHub username>.github.io` instead.
So what is going on here?
There are two ways to deploy to GitHub pages:

1. Repostitories with a `gh-pages` branch will be publicly available at `<your GitHub username>.github.io/<repo name>`
2. A repository named `<your GitHub username>.github.io` will serve the `master` branch at `<your GitHub username>.github.io`

I'm assuming that these two approaches are not mutually exclusive. We will see!

The steps to initialise the public repo are largely the same.
```bash
$ cd public
$ git init
$ git remote add origin git@github.com:<github-username>/<github-username>.github.io.git
```
Well that isn't very readable.
In my case the origin was set with the command:
```bash
$ git remote add origin git@github.com:tscott0/tscott0.github.io.git
```

Then add, commit and push.

```bash
$ git add --all
$ git commit -m "blog added"
$ git push -f origin master
```

Your site should then be available at `https://<github-username>.github.io`

## And one more thing
To ensure that your site is _only_ accessed over https you'll need to tick the `Enforce HTTPS` option under the "GitHub Pages" section of your repo settings.
This will redirect users to `https` using a `HTTP 301`.
